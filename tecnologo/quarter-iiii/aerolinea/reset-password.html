<!DOCTYPE html>
<html lang="es" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avianca</title>
    <link rel="shortcut icon" href="./avianca.png" type="image/x-icon">

    <!-- TailwindCSS & DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.11/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <div class="hero bg-base-200 min-h-screen" style="background-image: url(./overlay.jpg);">
        <div class="hero-overlay bg-black/60"></div>
        <div class="hero-content min-w-[600px] flex-col">
            <div>
                <img src="./avianca.png" alt="Imagen empresa" class="w-full h-[50px] object-contain">
                <h2 class="text-4xl font-extrabold text-white/70">AeroLinea Avianca</h2>
            </div>
            <div class="card bg-base-100 w-full shrink-0 shadow-2xl">
                <form class="card-body">
                    <h2 class="text-3xl font-extrabold">Registro de viajero</h2>
                    <div class="form-control">
                        <label class="label">
                            <span
                                class="label-text font-semibold after:content-['*'] after:ml-0.5 after:text-red-500">Contraseña
                                Nueva:</span>
                        </label>
                        <input class="input input-bordered" id="password" placeholder="Crea una contraseña segura" />
                    </div>
                    <div class="form-control">
                        <label class="label">
                            <span
                                class="label-text font-semibold after:content-['*'] after:ml-0.5 after:text-red-500">Confirma
                                tu contraseña:</span>
                        </label>
                        <input class="input input-bordered" id="confirmPassword"
                            placeholder="Escribe la misma contraseña" />
                    </div>
                    <div class="form-control mt-6">
                        <button type="submit" class="btn btn-primary">Enviar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        document.querySelector('form').addEventListener('submit', (event) => {
            event.preventDefault();

            let isValid = true;
            let errorMessage = "";

            document.querySelectorAll('.form-control').forEach(group => {
                if (group.querySelector('.error-label')) {
                    group.querySelector('input').classList.remove('border-red-500');
                }
                if (group.querySelector('.error-label')) {
                    group.querySelector('.error-label').remove();
                }
            });

            document.querySelectorAll('input').forEach(input => {
                if ((input.value == null || input.value === "" || input.value.length > 5)) {
                    input.classList.add('border-red-500');

                    let error = document.createElement('p');
                    error.innerHTML = "El input debe tener un valor válido.";
                    error.classList.add('text-red-500');
                    error.classList.add('text-sm');
                    error.classList.add('error-label');

                    input.closest('.form-control').appendChild(error);

                    isValid = false;
                    errorMessage = "Los inputs contienen un valor inválido"
                }
            });
                                                               
            if (document.getElementById('password').value !== document.getElementById('confirmPassword').value) {
                isValid = false;
                errorMessage = "Las contraseñas no coinciden"
            }

            if (!isValid) {
                swal.fire({
                    title: "Error",
                    text: errorMessage,
                    icon: "error"
                });
                return null;
            } else {
                document.querySelector('form').submit();
            }

        });
    </script>
</body>

</html>